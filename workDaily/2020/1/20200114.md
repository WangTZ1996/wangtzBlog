# 工作日报            -- 2020-1-14 --

## 1. 解决引导页选择标签之后数据没有及时渲染问题：

#### (1). 之前的设计是开环的获取数据方式，即没有得到服务器反馈就进行下一步操作，这种设计在网速好的情况下没有问题，但是一旦网速不佳或操作速度太快，就可能发生数据没有请求完整就进行渲染下一步的操作，这样会导致数据丢失。

#### ***改进设计***

目前的改进设计是在每一次点击选择标签的时候就向后台发送请求，并在请求得到数据之后向一个数组中push这个标签的id，这样这个数组中就记录了所有请求到数据的标签的id集合，我们会记录下选择了多少个标签，并在提交数据时检查数组中的id数量和选择的标签是不是相同的。

> 此处有一个问题就是在点击跳转下一页按钮时数据不一定都准备好了，这时判断之进行一次，之后数据准备好之后我们就不能直接通过一次点击按钮来进行跳转了，这里我做了一个轮询处理，即在点击跳转下一页按钮的时候启动一个setInterval()通过这个循环定时器来定时判断数据是否准备好了，当判断出数据准备好之后清空这个setInterval()的标志结束轮询。

```javascript
let loadOver = setInterval(() => {
	if ( /*判断轮询结束的条件*/ ) {

		clearInterval(loadOver)
	}
}, timeout)  // 延时时间
```

#### ***优化设计***

目前的改进虽然兼容了网络情况不好数据加载慢的情况，但是现在的设计鲁棒性还是不够，就是不够健壮，假如我们选择了20个标签但是其中有一两个标签请求的数据出现了问题就会导致最终的计数失败无法结束轮询使页面卡在这一步骤进行不下去。

> 改进的设计是第一页选择标签之后不进行判断直接跳转到下一个页面，然后下一个页面动态添加数据，这样既可以加快页面的跳转速度也可以保持稳定，将每一次请求数据的操作解耦合。

## 2. 情报站详情页：

#### (1). 情报站详情页添加了展示实体词列表

###### ***知识点：***

> display：flex 的元素不能自动换行显示，因为flex布局的元素默认的换行属性是nowarp（不换行），如果需要让display元素换行显示则需要声明flex-warp: warp

#### (2). 情报站详情页的编辑情报站信息页面的删除情报站实体词功能添加删除最后一个词提示警告的功能。

#### (3). 情报站修改资料页面头像添加自适应属性




















