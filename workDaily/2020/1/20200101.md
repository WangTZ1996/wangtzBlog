# 工作日报           -- 2020-1-1 --

## 1. 搜索页：

#### (1). 全局搜索组件距离页面顶部的宽度统一为0.9rem。

#### (2). 搜索页显示空态页问题：

> 目前的设计是通过v-if和v-else实现的搜索结果页面和空态页的切换，这个方法虽然简单且稳定但是有一个缺点就是v-else的范围比v-if大得多，即只要v-if的判断结果为false那么v-else的结果就为true，我们要的是只在搜索结束后没有结果才显示空态页，所以这里用v-else控制空态页的显示不合适，我们需要定义一个新的变量用来表示搜索结束且搜索结果为空的情况，这样可以避免空态页在不必要的时候展示。

#### (3). 搜索页实时搜索结果漏洞

> 问题描述： 就是在搜索事件触发后且没有得到搜索结果之前用户无法通过前端操作取消搜索事件。目前的搜索页在键入需要搜索的关键字之后就立即开始搜索，然后在得到后台结果和结束搜索事件，正常情况下后台都会返回搜索的结果不管是有结果还是没有搜索到数据都会有响应，但是如果后台搜索系统出了问题不能及时反馈搜索的结果，那么前端搜索页面就卡在搜索等待页面无法取消(刷新页面可以取消搜索），这种情况前端应该有一个手动取消或超时取消的机制来及时中断搜索事件。

## 2. 引导页：

#### (1). 引导页选择完标签之后下一步选择关注的媒体时，确认提交关注媒体列表会重复。

> 问题原因：在选择完3个标签之后跳转到下一个页面时就已经自动遍历了一遍推荐的媒体并且将选中的媒体push进了数组中，当这个页面点击确认提交时调用的还是这个方法所以这个方法中就包含了默认选中的9条媒体数据和经过点击选择的数据所以会出现重复。

> 解决方法：在最终提交选中的数据之前先清空一下保存选中媒体id的数组对象，然后再次遍历媒体对象，将选中的媒体id push到提交数组中。

> 优化方案：将初始遍历方法和提交方法拆分成两个独立的函数，这样在页面初始时就不用向数组中push id了节省一部分性能。















