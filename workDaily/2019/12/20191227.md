# 工作日报         -- 2019-12-27 -- 

## 1. 梳理优化目前用户主页缓存方案：

(1). 用户主页判断是否读取缓存的依据是通过两个变量判断的，必须是这两个变量同时符合条件才能读取缓存，否则用户详情页会请求新的数据，这两个变量都是存储在vuex里的，一个是用来判断路由方向的，就是判断页面是向前进入新的页面还是回退到之前请求过的数据。另一个变量是判断页面是否刷新的，因为如果页面路由访问的层数比较深刷新页面之前的缓存就找不到了，这种情况返回如果读取缓存就会出现错误，所以页面刷新后路由回退不读取本地缓存请求新数据。

(2). 用户主页读写缓存规则：在用户主页点击订阅、关注、粉丝列表进行路由跳转，点击解读、情报站详情页进行路由跳转会触发写入缓存操作，当从解读、情报站详情页回退到用户详情页或从订阅、关注、粉丝列表回退到用户详情页时会触发用户主页的读缓存操作，一旦缓存读取成功后就会将缓存数据栈里的刚刚读取过的缓存清楚，以保证缓存栈里存储的数据是线性的。

## 2. 用户详情页分栏按钮定位：

#### 需求场景：

(1). 使用基于jquery实现的原生按钮栏显示方法不够稳定，同时也存在性能上的损耗，本着能用css解决的问题就不用js去实现，所以处理分栏滚动定位这种场景应该优先选用css的粘性定位属性：position：sticky。粘性定位虽然相较于其他的四种定位对于老版本浏览器的兼容性差一些但是目前这个属性能在安卓和ios这两大移动平台较好的兼容所以吸顶的场景使用黏性定位还是很合适的。

## 3. 解决兼容性问题方案：

(1). 使用polyfill库

## 4. 应用中几处输入框光标不居中问题：

> BUG原因是我们把input标签的行高直接设置成了页面中的输入框元素的高度，input的光标高度默认和输入框的行高一样，而输入完文字之后输入框光标默认和文字的底线对齐，这样就导致高标偏上。

> 解决办法： 将input行高设置为文字应有的行高或者说将input行高设置成光标的高度，然后在input外层套一层div让input在div中居中然后再将div高度设为UI高度。










