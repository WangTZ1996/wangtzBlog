# 工作日报      -- 2019-12-9 --

## 1.新版发现页增加动态显示系统中情报站总数：

> 这个地方需求是要低频访问后台api系统，即每天只请求一次这个接口，目前的实现方法是在该页面的created钩子中添加一个方法。

>> (1).首先检查localStorage里是否有存储这个请求的字段，如果localStorage没有改字段则代表改用户首次访问次页面，这时向后台发送获取情报站总数的GET请求，并将请求结果和得到请求结果时的时间戳记录到loaclStorage里。

>> (2).如果localStorage存在该字段并且该字段的时间戳和当前时间戳相差毫秒数小于一天的毫秒数则从本地localStorage里读取该总数。localStorage存在该字段并且该字段的时间戳和当前时间戳相差毫秒数大于一天的毫秒数则重新请求。通过此方法来实现至少间隔24小时触发一次请求。

## 2.创建情报站部分更改数据结构：

#### (1). 将驱动页面的数据由字符串数组改为对象数组，因为之前的选中列表是不可选中的，现在需要对选中列表添加点击事件所以需要获取点击元素的index属性。

#### (2). 创建主题部分的搜索页移入了创建主题选择关键词组件内部，同过模板切换实现路由跳转