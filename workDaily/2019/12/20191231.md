# 工作日报             -- 2019-12-31 -- 

## 1. 修改主题详情页滚动加载问题：

> 问题描述: 首页和情报站详情页滚动加载偶尔会出现滑到底部没有触发加载事件的情况，只有把页面再次向上回退一段之后才能触发加载下一页的请求。

> 问题原因: 是出在主题详情页通知滚动组件加载时设置了一个延时，这个延时最初是为了等待前面的请求返回结果，可是由于请求事件不稳定，所以固定延时时间容易出错，导致加载卡顿。

> 解决方案: 将通知滚动加载下一页的事件放到this.$nextTrick(() => {})方法中执行，这样可以确保加载下一页事件执行的稳定性。

#### (1). nextTick方法：

Vue.nextTick( [callback, context] )
参数：
{Function} [callback]
{Object} [context]
用法：

在下次 DOM 更新循环结束之后执行延迟回调。在修改数据之后立即使用这个方法，获取更新后的 DOM。

```javascript
// 修改数据
vm.msg = 'Hello'
// DOM 还没有更新
Vue.nextTick(function () {
  // DOM 更新了
})

// 作为一个 Promise 使用 (2.1.0 起新增，详见接下来的提示)
Vue.nextTick()
  .then(function () {
    // DOM 更新了
  })
```

>> 2.1.0 起新增：如果没有提供回调且在支持 Promise 的环境中，则返回一个 Promise。请注意 Vue 不自带 Promise 的 polyfill，所以如果你的目标浏览器不原生支持 Promise (IE：你们都看我干嘛)，你得自己提供 polyfill。

参考：异步更新队列

## 2. 搜索页显示问题优化：

## 3. 去app打开提示在PC端显示问题：

> 通过分享获取的页面会顶部会有去app打开的提示，在PC端显示时这个提示框没有做适配，将原来这个元素的定位改为绝对定位就解决这个问题。

## 4. 编辑主题页输入标题和简介添加上了必填、选填的提示。

## 5. 全局顶部搜索框距离顶部宽度调整

## 6. 发现页推荐媒体轮播图页数自适应：

> 问题描述：之前的设计发现页推荐媒体功能固定推送30条数据，这30条数据以10页轮播图，每页展示3条的形式设计，当时没有考虑到数据不够30条的情况，所以在实际测试中会出现数据不够30条但是轮播图却依旧是10页的情况，这样用户体验就很不好。

> 优化方法：

>> (1). 目前的改进是在初始化请求到数据以后先将请求来的数据除以3得到结果，然后再使用Math.ceil()函数将除得的结果向上取整（比如结果为8.2就取整到9）这个取整后的结果作为页面渲染轮播图的页数，然依据这个计算后的页数动态渲染推荐媒体的轮播图。

>> (2). 分页器也是同样的原理，因为分页器设计的是使用一个数组驱动的，数组默认的长度是10，我们将这个驱动数组使用计算后得到的页数截取就得到了分页器的模型。

## 7.引导页分类标签更改：

#### (1). 引导页的分类标签由原来的44个精简为19个。












