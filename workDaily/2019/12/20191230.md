# 工作日报        -- 2019-12-30 -- 

## 1. 创建情报站：

#### (1). 创建情报站填写情报站标题和简介输入框加上了必填和选填的提示。

## 2. 页面样式: 

#### (1). 修改生日组件样式：

> 选择生日的组件是引用的外部组件，我们没办法直接更改。我采用的方法是在弹出选择年月日组件的时候找出组件内部各元素的class名，然后在全局的app.vue（vue根实例）下把对应的class名的css属性值用优先级更高的选择器重写一遍，在不改变dom结构的前提下通过优先级更高的css属性来将页面布局改为我们想要的样式。其中不需要的元素将display属性设为none，将其从dom流中去除。

>> 这里要注意的一点是选择日期的组件是一个弹窗组件，就本项目而言这个弹窗组件注册于全局也就是app.vue组件里的根实例。但是这个弹窗组件却只在指定的页面被调用，这里我们就容易把改写组件样式的css写在路由页面里，这样由于作用域的访问规则导致全局组册的弹窗组件不能访问到路由页面里的css样式，导致改写失败。所以如果要覆盖某一个组件的样式一定要把自定义的css使用优先级高的选择器定义在该组件的父级作用域里。

## 3. 个人中心更改性别栏应用新的样式，将原来的按钮文字由居中改为靠左对齐并在文字前加上图标。

## 4. 输入校验：

#### (1). 对于所有的输入框输入的信息进行去除首位空格的操作,如果输入经过去空格操作后为空则弹出报错。

> 过滤输入内容空格方法：

```javascript

function removeSpace(input) {
      if (input.replace(/(^\s+)|(\s+$)/g, '').length === 0) {
        {... } // 检测出输入全是空格调用全局提示方法
        return false
      } else {
        return input.replace(/(^\s+)|(\s+$)/g, '') // 检测出输入内容有效返回过滤前后空格之后的结果
      }
    }
    
```

这个方法在数据提交之前被调用，并将需要校验的输入值以参数形式传入函数里，然后判断函数返回值如果函数返回false则清空当前的输入值，如果函数返回不为false则用页面保存输入值的变量来接受函数的返回值，函数返回值就是页面输入变量经过过滤空格之后的结果。

## 5. 测评页：

#### (1). 测评页返回问题，用户在没有测评过的情况下进入测评页点击查看测评结果，跳转页面之后再返回会出现返回到点击查看结果之后的页面然后就又进入结果页面，这样就循环往复退不出去了。解决办法是将原来回退刷新然后定位到测评系统首页的方案改为直接回退到上一级页面。

#### (2). 进入查看测评结果系统后在任意页面刷新之后系统会卡死在读取进度条的步骤：

> 这个BUG的原因是我们进入用户的测评结果页之前就已经调用了测评结果的接口并且得到了测评结果的数据，我们通过这个数据来判断用户是直接进入读取测评结果还是进行测评的流程，因为获取测评结果和展示测评结果不在同一个页面，所以我们要通过vuex来跨组件传递这个结果，可是vuex里的数据在刷新之后会重置，就导致之前请求来的数据被清空了所以刷新之后的展示测评结果页面没有数据驱动就会卡死。

>> 解决办法：在测评结果页面的mounted钩子里首先判断页面是不是从：“我的测评”进入的，然后在进行判断vuex里的缓存测评结果对象是不是为空，如果为空则说明页面被刷新过就请求新的测评结果数据。











