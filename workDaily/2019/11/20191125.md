# 工作日报      -- 2019-11-25 --

## 1.解决创建主题上传头像在ios系统下的bug:

> BUG 原因：

>> 获取、解析、压缩图片的方法之前放在了弹窗组件里，一旦调起了本地相册之后弹窗组件会被注销，在Android环境下被注销的组件方法会缓存，而ios系统则不会缓存这些方法，所以在选择图片之后压缩处理图片的方法都已经随着弹窗组件被注销了，获取的图片就没有方法接收了，进而导致无法换图片的bug。

>> 解决办法，将有关图片获取和处理的方法都写在页面本身，弹窗组件只是触发页面本身的input框的方法，这样就避免了方法随组件一同注销的问题。

>> 优化：将页面有关图片处理的方法解藕之后写成一个js模块文件，然后在用到的也页面已引入这个模块来进行有关的处理，这样提高稳定性，简化代码。

>>> 总结经验：组件与方法应该解藕分离，组件应该注重本身的功能，而页面有关的功能与接口应在页面组件本身进行调用。


## 2.项目优化点：

(1).将popUps弹窗组件内的一些与弹窗本身无关的方法迁移到所在的页面（例如现在的删除主题方法是写在弹窗组件里的，虽然现在看没有异常但是这样的设计却不符合设计模式，应该将与页面相关的逻辑写在页面本身，这样减少了组件间的数据传递，提高稳定性，也更符合代码高内聚的设计原则）。